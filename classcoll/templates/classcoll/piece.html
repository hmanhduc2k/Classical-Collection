{% extends 'classcoll/layout.html' %}
{% load static %}

{% block body %}
    <div class="bg-light">
        <h2>{{piece.name}}<h2>
        <h5><a href="{% url 'composer' piece.composer.name%}">{{piece.composer.name}}</a></h5>
        <audio controls>
            <source src="/upload/{{piece.source}}" type="audio/mpeg">
        </audio>
        <p>{{piece.description}}</p>
        <br>
        <p>Musical period: {{ piece.period.era }}</p>
        <p>Difficulty level (if applicable): {{ piece.difficulty.rating }}</p>
        <button data-value="{{piece.id}}" id="favoritePiece" class="btn btn-secondary">
            Add to Favorite
        </button>
    </div>

    <div>
        <form method="POST" action="">
            <div class="form-floating">
                <textarea class="form-control" required name="comment"></textarea>
                <button type="submit">Submit</button>
            </div>
        </form>
        <div>
            {% for comment in comments %}
                <div>
                    {% if comment.parent %}
                    {% endif %}
                    <i>Posted by {{comment.user.username}} at {{comment.time}}</i>
                    <p> {{comment.content}} </p>
                    <button class="btn btn-primary">Reply</button>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'classcoll/js/piece.js' %}"></script>
{% endblock %}